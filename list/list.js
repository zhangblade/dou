(function(){var a=angular.module("douban.listModule",["douban.service"]);a.config(["$routeProvider",function(b){b.when("/:category/:page?",{templateUrl:"list/list.html",controller:"listCtrl"})}]);a.controller("listCtrl",["$rootScope","$scope","$http","jsonpService","$routeParams","$route","appConfig",function(f,h,d,j,g,e,i){f.category=g.category;var c=parseInt(g.page||1);h.currentPage=c;var b=(c-1)*i.pageCount;j.jsonp(i.listUrl+g.category,{count:i.pageCount,start:b,q:f.input},function(k){h.subjects=k.subjects;h.total=k.total;h.totalPage=Math.ceil(h.total/i.pageCount);h.title=k.title;h.pageconfig={totalPage:h.totalPage,showPage:5,currentPage:c,click:function(l){e.updateParams({page:l});e.reload()}};h.$apply()})}])})();